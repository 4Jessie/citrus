<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
	
    <bean id="loggingInterceptor" class="org.springframework.ws.server.endpoint.interceptor.PayloadLoggingInterceptor">
        <description>
            This interceptor logs the message payload.
        </description>
    </bean>
    
    <bean id="helloServicePayloadMapping" class="org.springframework.ws.server.endpoint.mapping.PayloadRootQNameEndpointMapping">
        <property name="mappings">
            <props>
                <prop key="{http://www.consol.de/schemas/samples/sayHello.xsd}HelloStandaloneRequest">helloServiceEndpoint</prop>
            </props>
        </property>
        <property name="interceptors">
            <list>
                <ref bean="loggingInterceptor"/>
            </list>
        </property>
    </bean>
    
    <bean id="helloServiceEndpoint" class="com.consol.citrus.ws.WebServiceEndpoint">
        <property name="messageHandler">
            <bean class="com.consol.citrus.adapter.handler.StaticResponseProducingMessageHandler">
                <property name="messagePayload">
                    <value>
                    <![CDATA[
                        <ns0:HelloStandaloneResponse xmlns:ns0="http://www.consol.de/schemas/samples/sayHello.xsd">
                            <ns0:MessageId>123456789</ns0:MessageId>
                            <ns0:CorrelationId>CORR123456789</ns0:CorrelationId>
                            <ns0:User>WebServer</ns0:User>
                            <ns0:Text>Hello User</ns0:Text>
                        </ns0:HelloStandaloneResponse>
                    ]]>
                    </value>
                </property>
                <property name="messageHeader">
                    <map>
                        <entry key="{http://www.consol.de/schemas/samples/sayHello.xsd}ns0:Operation" value="sayHelloResponse"/>
                        <entry key="{http://www.consol.de/schemas/samples/sayHello.xsd}ns0:Request" value="HelloRequest"/>
                        <entry key="{http://www.consol.de/schemas/samples/sayHello.xsd}ns0:SOAPAction" value="sayHello"/>
                    </map>
                </property>
            </bean>
        </property>
    </bean>
    
    <bean id="defaultPayloadMapping" class="org.springframework.ws.server.endpoint.mapping.PayloadRootQNameEndpointMapping">
        <description>
            This endpoint mapping is the default mapping for all incoming requests. Mapping will be used in case no other endpoint mapping fits
            the incoming request. Other endpoint mappings can be found in the imported context files, where service implementations are defined.
            The default mapping has only logging interceptor defined.
        </description>
        <property name="defaultEndpoint" ref="defaultWsEndpoint"/>
        <property name="interceptors">
            <list>
                <ref bean="loggingInterceptor"/>
            </list>
        </property>
    </bean>
    
    <bean id="defaultWsEndpoint" class="com.consol.citrus.ws.WebServiceEndpoint">
        <property name="messageHandler">
            <bean class="com.consol.citrus.adapter.handler.JmsConnectingMessageHandler">
                <property name="destinationName" value="TestSuite.Ws.Stub.RequestQueue"/>
                <property name="replyDestinationName" value="TestSuite.Ws.Stub.ResponseQueue"/>
                <property name="connectionFactory">
                    <bean class="org.apache.activemq.ActiveMQConnectionFactory">
                        <property name="brokerURL" value="tcp://localhost:61616" />
                    </bean>
                </property>
                <property name="replyTimeout" value="2000"/>
            </bean>
        </property>
    </bean>
    
</beans>