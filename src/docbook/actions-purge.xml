<?xml version="1.0" encoding="UTF-8"?>
<section id="actions-purge">
    <title>Purge JMS destinations</title>

    <para>Purging JMS destinations during the test run is quite essential. Different test cases can influence each other when sending
    messages to the same destination endpoints. Of course a test case should only receive messages that belong to it. Therefore it is a 
    good idea to purge the JMS queue destiantions between the test cases so obsolete messages stuck in a JMS queue for some 
    reason are removed.</para>
    
    <para>The 'com.consol.citrus.actions.PurgeJmsQueuesBean' action offers the property "queueNames" to hold all destiantion namse 
    that are supposed to be purged. As you can see in the next example it is quite easy to specify a group of destinations.</para>
        
    <programlisting>
  &lt;bean id=&quot;purgeJmsQueues&quot;
      class=&quot;de.consol.testsuite.actions.PurgeJmsQueuesBean&quot;&gt;
      &lt;property name=&quot;connectionFactory&quot;&gt;
          &lt;ref bean=&quot;tibcoQueueConnectionFactory&quot;/&gt;
      &lt;/property&gt;
      &lt;property name=&quot;queueNames&quot;&gt;
          &lt;list&gt;
              &lt;value&gt;${jms.queue.hello.request.in}&lt;/value&gt;
              &lt;value&gt;${jms.queue.hello.response.out}&lt;/value&gt;
              &lt;value&gt;${jms.queue.echo.request}&lt;/value&gt;
              &lt;value&gt;${jms.queue.echo.response}&lt;/value&gt;
              &lt;value&gt;JMS.Queue.Dummy&lt;/value&gt;
          &lt;/list&gt;
      &lt;/property&gt;
  &lt;/bean&gt;
    </programlisting>
    
    <tip>
        <para>Usually you do not need to execute the action by yourself in every test case. The test suite definition offers tasks to run 
        before, between and after the test cases. This is a very simple way to purge the destinations between the tests. See 
        <xref linkend="testsuite-tasks"/> for more information about this.</para>
    </tip>
</section>